# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redsys –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

## –û–ø–∏—Å–∞–Ω–∏–µ

Redsys ‚Äî —ç—Ç–æ –ø–ª–∞—Ç–µ–∂–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–ø–ª–∞—Ç—É –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Telegram Payments API. –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É —Å Telegram Stars –∏ Redsys.

## –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ "Payments"
5. –í—ã–±–µ—Ä–∏—Ç–µ "Redsys" –∏–ª–∏ "Add payment provider"
6. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è provider token
7. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω: `2051251535:TEST:OTk5MDA4ODgxLTAwNQ`

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` —Ñ–∞–π–ª:

```bash
# –í–∫–ª—é—á–∏—Ç—å Redsys –ø–ª–∞—Ç–µ–∂–∏
REDSYS_ENABLED=true

# Provider token –æ—Ç BotFather (—Ç–µ—Å—Ç–æ–≤—ã–π –∏–ª–∏ –ø—Ä–æ–¥–∞–∫—à–Ω)
REDSYS_PROVIDER_TOKEN=2051251535:TEST:OTk5MDA4ODgxLTAwNQ

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤ –ø–∞–∫–µ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
REDSYS_PACKAGE_CREDITS=10

# –¶–µ–Ω–∞ –ø–∞–∫–µ—Ç–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50000 = 500 —Ä—É–±–ª–µ–π)
REDSYS_PACKAGE_PRICE_RUB=50000

# –í–∞–ª—é—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞: RUB, EUR, USD (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: RUB)
REDSYS_CURRENCY=RUB
```

## –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –¥–ª—è Redsys:

**–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–µ–∂:**
- –ö–∞—Ä—Ç–∞: `4918010000000051`

**–£—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂ (–±–µ–∑ challenge):**
- –ö–∞—Ä—Ç–∞: `4918010000000085`
- –õ—é–±–∞—è –¥—Ä—É–≥–∞—è –∫–∞—Ä—Ç–∞ (–∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤—ã—à–µ)

**–ü–ª–∞—Ç–µ–∂ —Å challenge (3D Secure):**
- –ö–∞—Ä—Ç—ã: `4548819407777774`, `4918019199883839`, `4548814479727229`
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—É–º–º–∞ –±–æ–ª—å—à–µ 60‚Ç¨ (~60$)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `REDSYS_ENABLED=true` –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/buy` ‚Äî –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
4. –í—ã–±–µ—Ä–∏—Ç–µ "üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π"
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
pm2 restart video-bot --update-env
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã

–ï—Å–ª–∏ –æ–±–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω—ã (Stars –∏ Redsys), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥—è—Ç –º–µ–Ω—é –≤—ã–±–æ—Ä–∞:

```
üí≥ –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:

‚≠ê Telegram Stars
‚Ä¢ 10 –∫—Ä–µ–¥–∏—Ç–æ–≤ –∑–∞ 500 ‚≠ê Stars ($5)

üí≥ Redsys (–∫–∞—Ä—Ç–∞)
‚Ä¢ 10 –∫—Ä–µ–¥–∏—Ç–æ–≤ –∑–∞ 500 RUB
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä

–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –≤—ã–±–æ—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äî —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤

### Telegram Stars (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
- `STARS_PACKAGE_CREDITS=10` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤
- `STARS_PACKAGE_PRICE=500` ‚Äî —Ü–µ–Ω–∞ –≤ Stars

### Redsys:
- `REDSYS_PACKAGE_CREDITS=10` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤
- `REDSYS_PACKAGE_PRICE_RUB=50000` ‚Äî —Ü–µ–Ω–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö (500 —Ä—É–±–ª–µ–π)
- `REDSYS_CURRENCY=RUB` ‚Äî –≤–∞–ª—é—Ç–∞ (RUB, EUR, USD)

## –í–∞–∂–Ω–æ

- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ–¥–∞–∫—à–Ω —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ BotFather
- **–í–∞–ª—é—Ç–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞–ª—é—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–π —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- **–¶–µ–Ω—ã**: –¶–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö –≤–∞–ª—é—Ç—ã (–∫–æ–ø–µ–π–∫–∏ –¥–ª—è RUB, —Ü–µ–Ω—Ç—ã –¥–ª—è USD/EUR)

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞:
   ```bash
   pm2 logs video-bot
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `REDSYS_ENABLED=true`

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `REDSYS_PROVIDER_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ BotFather

5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (–≤ –∫–æ–ø–µ–π–∫–∞—Ö –¥–ª—è RUB)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** `.env` —Ñ–∞–π–ª —Å –ø—Ä–æ–¥–∞–∫—à–Ω —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ Git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –†–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–¥–∞–∫—à–Ω —Ç–æ–∫–µ–Ω–∞

