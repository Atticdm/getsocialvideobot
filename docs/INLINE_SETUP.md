# ๐ฏ ะะฐัััะพะนะบะฐ Inline-ัะตะถะธะผะฐ ั Render

ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ะฝะฐัััะพะนะบะต inline-ัะตะถะธะผะฐ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ temp-server ะฝะฐ Render ะธ ะพัะฝะพะฒะฝะพะณะพ ะฑะพัะฐ ะฝะฐ Railway.

## ๐ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ
โ   Telegram      โ โโโโโโโโบโ  Bot (Railway)   โโโโโโโโโโบโ Temp-Server  โ
โ   User          โ         โ                  โ upload  โ  (Render)    โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโ
        โ                           โ                             โ
        โ                           โ                             โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 Inline video URL: https://temp-server.onrender.com/tmp/video.mp4
```

**ะะพัะตะผั ะดะฒะฐ ัะตัะฒะตัะฐ?**
- **Railway**: ะฅะพััะธั ะพัะฝะพะฒะฝะพะณะพ ะฑะพัะฐ, ัะบะฐัะธะฒะฐะตั ะฒะธะดะตะพ
- **Render**: ะะฐะทะดะฐะตั ะฒะธะดะตะพ ัะฐะนะปั ะดะปั Telegram (ะธะทะฑะตะณะฐะตะผ ะพะณัะฐะฝะธัะตะฝะธะน Railway)

---

## ๐ ะะพัะฐะณะพะฒะฐั ะฝะฐัััะพะนะบะฐ

### ะจะฐะณ 1: ะะตะฟะปะพะน temp-server ะฝะฐ Render

ะกะปะตะดัะนัะต ะธะฝััััะบัะธะธ ะฒ [temp-server/RENDER_DEPLOY.md](../temp-server/RENDER_DEPLOY.md)

**ะะปััะตะฒัะต ะผะพะผะตะฝัั:**
1. Root Directory: `temp-server`
2. ะะปะฐะฝ: **Starter** ($7/ะผะตั) ะดะปั ััะฐะฑะธะปัะฝะพััะธ
3. Environment Variable: `UPLOAD_SECRET=<ัะณะตะฝะตัะธััะนัะต-ัะตะบัะตัะฝัะน-ะบะปัั>`

ะะพัะปะต ะดะตะฟะปะพั ะฒั ะฟะพะปััะธัะต URL:
```
https://temp-video-server-xxxx.onrender.com
```

### ะจะฐะณ 2: ะะฐัััะพะนะบะฐ ะพัะฝะพะฒะฝะพะณะพ ะฑะพัะฐ ะฝะฐ Railway

ะัะบัะพะนัะต Railway Dashboard ะฒะฐัะตะณะพ ะฑะพัะฐ ะธ ะดะพะฑะฐะฒััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:

#### ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต:

```env
TEMP_SERVER_URL=https://temp-video-server-xxxx.onrender.com
TEMP_SERVER_SECRET=<ัะพั-ะถะต-ัะตะบัะตั-ััะพ-ะฝะฐ-render>
```

โ๏ธ **ะะะะขะะงะะ**: `TEMP_SERVER_SECRET` ะดะพะปะถะตะฝ **ัะพัะฝะพ ัะพะฒะฟะฐะดะฐัั** ั `UPLOAD_SECRET` ะฝะฐ Render!

#### ะะตะฝะตัะฐัะธั ัะตะบัะตัะฝะพะณะพ ะบะปััะฐ:

```bash
# ะะฐัะธะฐะฝั 1: OpenSSL
openssl rand -base64 32

# ะะฐัะธะฐะฝั 2: Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# ะะฐัะธะฐะฝั 3: Python
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

### ะจะฐะณ 3: ะะตัะตะทะฐะฟััะบ ะฑะพัะฐ

ะะพัะปะต ะดะพะฑะฐะฒะปะตะฝะธั ะฟะตัะตะผะตะฝะฝัั Railway ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะทะฐะฟัััะธั ัะตัะฒะธั.

ะัะพะฒะตัััะต ะปะพะณะธ:
```
โ TEMP_SERVER_URL configured: https://temp-video-server-xxxx.onrender.com
โ TEMP_SERVER_SECRET configured
```

---

## โ ะขะตััะธัะพะฒะฐะฝะธะต

### 1. ะัะพะฒะตัะบะฐ temp-server

```bash
curl https://temp-video-server-xxxx.onrender.com/healthz
```

ะะถะธะดะฐะตะผัะน ะพัะฒะตั:
```json
{"status":"ok","tmpDir":"/tmp"}
```

### 2. ะขะตััะธัะพะฒะฐะฝะธะต inline-ัะตะถะธะผะฐ ะฒ Telegram

1. ะัะบัะพะนัะต ะปัะฑะพะน ัะฐั ะฒ Telegram
2. ะะฒะตะดะธัะต: `@getsocialvideobot https://www.instagram.com/reel/XXXXXXXXXXX/`
3. ะะพะถะดะธัะตัั ะฟะพัะฒะปะตะฝะธั ะบะฐััะพัะบะธ ั ะฒะธะดะตะพ
4. ะัะฑะตัะธัะต ะฒะธะดะตะพ ะดะปั ะพัะฟัะฐะฒะบะธ

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
- โ ะะธะดะตะพ ะฟะพัะฒะปัะตััั ะฒ ะบะฐััะพัะบะต (thumbnail)
- โ ะะธะดะตะพ ะฒะพัะฟัะพะธะทะฒะพะดะธััั ะฟัะธ ะบะปะธะบะต
- โ ะะตั ะบัะฐัะฝะพะณะพ ะฒะพัะบะปะธัะฐัะตะปัะฝะพะณะพ ะทะฝะฐะบะฐ
- โ ะะตั ะพัะธะฑะบะธ "Your message could not be sent"

### 3. ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ

#### ะะพะณะธ ะฑะพัะฐ (Railway):

```
INFO: Inline download started
INFO: File uploaded to temp-server for inline
     videoUrl: https://temp-video-server-xxxx.onrender.com/tmp/video-123456.mp4
```

#### ะะพะณะธ temp-server (Render):

```
File uploaded: video-123456.mp4 (15234567 bytes)
GET /tmp/video-123456.mp4 200
```

---

## ๐ Troubleshooting

### ะัะพะฑะปะตะผะฐ: "Your message could not be sent"

**ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั:**

1. **Free ะฟะปะฐะฝ Render "ัะฟะธั"**
   ```
   ะะตัะตะฝะธะต: ะะฑะฝะพะฒะธัะต ะฝะฐ Starter ะฟะปะฐะฝ ($7/ะผะตั)
   ```

2. **ะะตะฒะตัะฝัะน UPLOAD_SECRET**
   ```
   ะัะพะฒะตัััะต: ะกะตะบัะตัั ะฝะฐ Render ะธ Railway ะดะพะปะถะฝั ัะพะฒะฟะฐะดะฐัั
   ะะพะณะธ Render ะฟะพะบะฐะถัั: 401 Unauthorized
   ```

3. **TEMP_SERVER_URL ะฝะต ะฝะฐัััะพะตะฝ**
   ```
   ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฝะฐ Railway
   ะะพั ะดะพะปะถะตะฝ ะฟะพะบะฐะทะฐัั ะฒ ะปะพะณะฐั: TEMP_SERVER_URL configured
   ```

4. **ะคะฐะนะป ะฝะต ะทะฐะณััะทะธะปัั ะฝะฐ temp-server**
   ```
   ะัะพะฒะตัััะต ะปะพะณะธ ะฑะพัะฐ ะฝะฐ Railway:
   - "Failed to upload to temp-server" - ะฟัะพะฑะปะตะผะฐ ั ะทะฐะณััะทะบะพะน
   - "Falling back to local URL" - ะธัะฟะพะปัะทัะตััั ะปะพะบะฐะปัะฝัะน URL (ะฝะต ัะฐะฑะพัะฐะตั)
   ```

### ะัะพะฑะปะตะผะฐ: ะะธะดะตะพ ะทะฐะณััะถะฐะตััั ะพัะตะฝั ะผะตะดะปะตะฝะฝะพ

**ะัะธัะธะฝั:**
- Free ะฟะปะฐะฝ Render ะฟัะพััะฟะฐะตััั ~30 ัะตะบัะฝะด
- ะะพะปััะพะน ัะฐะทะผะตั ัะฐะนะปะฐ
- ะะตะดะปะตะฝะฝะพะต ัะพะตะดะธะฝะตะฝะธะต ะพั Telegram ัะตัะฒะตัะพะฒ ะดะพ Render

**ะะตัะตะฝะธะต:**
1. ะัะฟะพะปัะทัะนัะต Starter ะฟะปะฐะฝ Render
2. ะะฟัะธะผะธะทะธััะนัะต ัะฐะทะผะตั ะฒะธะดะตะพ (MAX_FILE_MB)

### ะัะพะฑะปะตะผะฐ: 401 Unauthorized ะฒ ะปะพะณะฐั temp-server

```
POST /upload 401 Unauthorized
```

**ะะตัะตะฝะธะต:**
ะัะพะฒะตัััะต, ััะพ:
1. `UPLOAD_SECRET` ะฝะฐ Render ัััะฐะฝะพะฒะปะตะฝ
2. `TEMP_SERVER_SECRET` ะฝะฐ Railway ัะพะฒะฟะฐะดะฐะตั ั Render
3. ะะตั ะปะธัะฝะธั ะฟัะพะฑะตะปะพะฒ ะฒ ัะตะบัะตัะฐั

### ะัะพะฑะปะตะผะฐ: ะะพั ะฝะต ะธัะฟะพะปัะทัะตั temp-server

ะัะพะฒะตัััะต ะปะพะณะธ ะฑะพัะฐ:
```bash
# ะะพะปะถะฝะพ ะฑััั:
INFO: File uploaded to temp-server for inline

# ะัะปะธ ะฒะผะตััะพ ััะพะณะพ:
WARN: TEMP_SERVER_URL not configured
# ะะปะธ:
ERROR: TEMP_SERVER_SECRET not configured
```

**ะะตัะตะฝะธะต:** ะฃะฑะตะดะธัะตัั, ััะพ ะพะฑะต ะฟะตัะตะผะตะฝะฝัะต ัััะฐะฝะพะฒะปะตะฝั ะฝะฐ Railway.

---

## ๐ ะะพะฝะธัะพัะธะฝะณ

### Healthcheck temp-server

ะกะพะทะดะฐะนัะต ะผะพะฝะธัะพัะธะฝะณ (UptimeRobot, Cronitor, etc.):
```
GET https://temp-video-server-xxxx.onrender.com/healthz
ะะฝัะตัะฒะฐะป: 5 ะผะธะฝัั
```

**Bonus**: ะญัะพ ัะฐะบะถะต ะฟะพะผะพะถะตั "ัะฐะทะฑัะดะธัั" Free ะฟะปะฐะฝ Render.

### ะะตััะธะบะธ ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั

1. **ะัะตะผั ะพัะฒะตัะฐ temp-server** (ะดะพะปะถะฝะพ ะฑััั < 500ms)
2. **ะฃัะฟะตัะฝะพััั ะทะฐะณััะทะพะบ** (% ััะฟะตัะฝัั POST /upload)
3. **Uptime temp-server** (ะดะพะปะถะฝะพ ะฑััั 100% ะฝะฐ Starter)

---

## ๐ฐ ะกัะพะธะผะพััั

| ะะพะผะฟะพะฝะตะฝั | ะกะตัะฒะธั | ะะปะฐะฝ | ะฆะตะฝะฐ/ะผะตั |
|-----------|--------|------|----------|
| ะะพั | Railway | Hobby | $5 (500h free) |
| Temp-server | Render | Free | $0 (ั ะพะณัะฐะฝะธัะตะฝะธัะผะธ) |
| Temp-server | Render | Starter | $7 (ัะตะบะพะผะตะฝะดัะตััั) |

**ะัะพะณะพ ะดะปั production**: ~$12/ะผะตั

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะกะตะบัะตัะฝัะน ะบะปัั

- ะะธะฝะธะผัะผ 32 ัะธะผะฒะพะปะฐ
- ะัะฟะพะปัะทัะนัะต ะบัะธะฟัะพะณัะฐัะธัะตัะบะธ ััะพะนะบะธะน ะณะตะฝะตัะฐัะพั
- ะฅัะฐะฝะธัะต ะฒ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั, ะฝะต ะฒ ะบะพะดะต
- ะะตะณัะปััะฝะพ ัะพัะธััะนัะต (ะบะฐะถะดัะต 3-6 ะผะตัััะตะฒ)

### CORS

Temp-server ะฟะพ ัะผะพะปัะฐะฝะธั ัะฐะทัะตัะฐะตั ะฒัะต ะธััะพัะฝะธะบะธ (`*`).  
ะะปั production ัะตะบะพะผะตะฝะดัะตััั ะพะณัะฐะฝะธัะธัั:

```javascript
// temp-server/server.js
app.use(cors({
  origin: ['https://api.telegram.org']
}));
```

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- [temp-server README](../temp-server/README.md)
- [Render Deployment Guide](../temp-server/RENDER_DEPLOY.md)
- [Railway Deployment Guide](DEPLOY_RAILWAY.md)
- [Telegram Bot API: Inline Mode](https://core.telegram.org/bots/inline)

---

## ๐ ะะพัะพะฒะพ!

ะะพัะปะต ััะฟะตัะฝะพะน ะฝะฐัััะพะนะบะธ ะฒะฐั ะฑะพั ะดะพะปะถะตะฝ:
- โ ะะฐะฑะพัะฐัั ะฒ inline-ัะตะถะธะผะต
- โ ะะฐะทะดะฐะฒะฐัั ะฒะธะดะตะพ ัะตัะตะท temp-server ะฝะฐ Render
- โ ะะพะบะฐะทัะฒะฐัั ะฒะธะดะตะพ ะฒ Telegram ะฑะตะท ะพัะธะฑะพะบ
- โ ะะฒัะพะผะฐัะธัะตัะบะธ ะพัะธัะฐัั ััะฐััะต ัะฐะนะปั

**ะกะปะตะดัััะธะต ัะฐะณะธ:**
1. ะัะพัะตััะธััะนัะต ั ัะฐะทะฝัะผะธ ะฟะปะฐััะพัะผะฐะผะธ (Instagram, TikTok, YouTube)
2. ะะฐัััะพะนัะต ะผะพะฝะธัะพัะธะฝะณ uptime
3. (ะะฟัะธะพะฝะฐะปัะฝะพ) ะะฑะฝะพะฒะธัะต ะฝะฐ Starter ะฟะปะฐะฝ ะดะปั ััะฐะฑะธะปัะฝะพััะธ

